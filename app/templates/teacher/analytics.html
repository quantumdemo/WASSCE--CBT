{% extends "base.html" %}

{% block content %}
<div class="dashboard-container">
    <aside class="sidebar">
        <!-- This would be dynamic in a real app -->
        <div class="user-profile">
            <img src="https://via.placeholder.com/40" alt="User Avatar">
            <div>
                <strong>Mr. Adebayo</strong>
                <small>Teacher</small>
            </div>
        </div>
        <nav class="dashboard-nav">
            <ul>
                <li><a href="{{ url_for('main.teacher_dashboard') }}">Dashboard</a></li>
                <li><a href="{{ url_for('main.question_bank') }}">Question Bank</a></li>
                <li><a href="{{ url_for('main.exam_builder') }}">Exams</a></li>
                <li class="active"><a href="{{ url_for('main.results') }}">Results</a></li>
                <li><a href="{{ url_for('main.settings') }}">Settings</a></li>
            </ul>
        </nav>
        <div class="logout-link">
            <a href="{{ url_for('auth.logout') }}">Logout</a>
        </div>
    </aside>
    <main class="dashboard-main">
        <div class="dashboard-header">
            <h1>Performance Analytics</h1>
            <p>Review performance metrics for your students and exams.</p>
        </div>

        <div class="analytics-grid">
            <div class="metric-card">
                <h3>Overall Average Score</h3>
                <p class="metric">{{ analytics.overall_average }}%</p>
            </div>
            <div class="metric-card">
                <h3>Completion Rate</h3>
                <p class="metric">{{ analytics.completion_rate }}%</p>
            </div>
            <div class="metric-card">
                <h3>Total Submissions</h3>
                <p class="metric">{{ analytics.total_submissions }}</p>
            </div>
        </div>

        <div class="content-panel" style="margin-top: 20px;">
            <h2>Average Score by Subject</h2>
            <div class="chart-placeholder">
                <!-- In a real app, a library like Chart.js would render a chart here -->
                <p>Bar chart showing average scores per subject.</p>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>Average Score</th>
                    </tr>
                </thead>
                <tbody>
                    {% for subject in analytics.average_score_by_subject %}
                    <tr>
                        <td>{{ subject.subject }}</td>
                        <td>{{ subject.score }}%</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="content-panel" style="margin-top: 20px;">
            <h2>Recent Exam Performance</h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Exam Title</th>
                        <th>Average Score</th>
                    </tr>
                </thead>
                <tbody>
                    {% for exam in analytics.recent_exam_performance %}
                    <tr>
                        <td>{{ exam.exam }}</td>
                        <td>{{ exam.average }}%</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </main>
</div>
{% endblock %}
